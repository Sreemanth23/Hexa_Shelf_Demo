System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileCreation.ts"],(function(e){var t,i,n,o,l,r,s,a,d,c,h,g,S,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,s=e.Camera,a=e.Node,d=e.input,c=e.Input,h=e.geometry,g=e.PhysicsSystem,S=e.Component},function(e){u=e.TileCreation}],execute:function(){var x,p,f,N,y,b,I,m,T;l._RF.push({},"7e4f7aks2VC1rFHi44W0CxQ","GameManager",void 0);var v=r.ccclass,C=r.property;e("GameManager",(x=v("GameManager"),p=C(s),f=C(a),N=C(u),x((I=t((b=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"camera",I,o(t)),n(t,"HelixParentNode",m,o(t)),n(t,"tileCreation",T,o(t)),t.StartingPoint=void 0,t.SelectedNode=null,t.InitialAngle=void 0,t.previousAngle=0,t.Touch=!0,t}i(t,e);var l=t.prototype;return l.onEnable=function(){d.on(c.EventType.TOUCH_START,this.onTouchStart,this),d.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),d.on(c.EventType.TOUCH_END,this.onTouchEnd,this)},l.onDisable=function(){d.off(c.EventType.TOUCH_START,this.onTouchStart,this),d.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this),d.off(c.EventType.TOUCH_END,this.onTouchEnd,this)},l.onTouchStart=function(e){var t=e.getLocation();this.StartingPoint=t.x;var i=new h.Ray;this.camera.screenPointToRay(t.x,t.y,i);if(g.instance.raycastClosest(i,4294967295,1e3,!0)){var n=g.instance.raycastClosestResult.collider.node;"Shelf"==n.name&&(this.SelectedNode=n,4==this.SelectedNode.getSiblingIndex()||-1==this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()+1][0]?this.touchselection(n):this.SelectedNode=null)}},l.touchselection=function(e){this.InitialAngle=e.eulerAngles.y;var t=this.HelixParentNode.children[this.SelectedNode.getSiblingIndex()].children[this.tileCreation.setIdexArray[this.SelectedNode.getSiblingIndex()][0]],i=t.getPosition();t.setPosition(i.x,0*this.SelectedNode.getSiblingIndex(),i.z)},l.onTouchMove=function(e){if(null!==this.SelectedNode&&"Shelf"===this.SelectedNode.name){var t=(e.getLocation().x-this.StartingPoint)/4;this.SelectedNode.setRotationFromEuler(0,this.InitialAngle+t,0)}},l.onTouchEnd=function(e){if(null!==this.SelectedNode){if("Shelf"==this.SelectedNode.name){var t=this.InitialAngle,i=this.calculateRotation(t,this.SelectedNode.eulerAngles.y),n=this.FixRotPos(this.SelectedNode.eulerAngles.y),o=this.FixRotPos(i);this.SelectedNode.setRotationFromEuler(0,n,0),this.tileCreation.changeinArray(this.SelectedNode.getSiblingIndex(),o);var l=this.HelixParentNode.children[this.SelectedNode.getSiblingIndex()].children[this.tileCreation.setIdexArray[this.SelectedNode.getSiblingIndex()][0]],r=l.getPosition(),s=this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()][0];if(0==this.SelectedNode.getSiblingIndex()||1==this.SelectedNode.getSiblingIndex()||0==this.placeOnSegment(this.SelectedNode.getSiblingIndex()))l.setPosition(r.x,-.05*this.SelectedNode.getSiblingIndex(),r.z);else{l.setPosition(r.x,-.05*(6*this.placeOnSegment(this.SelectedNode.getSiblingIndex())+1),r.z);for(var a=this.HelixParentNode.children[this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())].children[this.tileCreation.setIdexArray[this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())][0]],d=0;d<5;d++)l.children.length>0&&(l.children[0].setPosition(0,.05*d,0),l.children[0].parent=a,a.setPosition(a.position.x,-.05*(this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())),a.position.z));this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()][0]=-1,this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())][0]=s}}this.SelectedNode=null}},l.placeOnSegment=function(e){for(var t=[],i=e;i>1;i--){if(-1==this.tileCreation.HexArray[i-1][0])t.push(i-1);else if(0==t.length)return 0}return e-t[t.length-1]},l.FixRotPos=function(e){return 20*Math.round(e/20)},l.calculateRotation=function(e,t){var i=t-e;return i>180?i-=360:i<-180&&(i+=360),i},l.openGameLink=function(){window.open("https://play.google.com/store/apps/details?id=com.gamebrain.hexasort","HexaSort")},t}(S)).prototype,"camera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(b.prototype,"HelixParentNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(b.prototype,"tileCreation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManager.ts","./TileCreation.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/TileCreation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,a,o,l,s,c,u,h,f,p,d,y,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Prefab,s=e.Material,c=e.Node,u=e.setDisplayStats,h=e.instantiate,f=e.MeshRenderer,p=e.ParticleSystem,d=e.tween,y=e.Vec3,v=e.Component}],execute:function(){var m,b,g,w,x,A,C,M,H,P,S,E,I;a._RF.push({},"dc84dePlphEnJHw83WUr57u","TileCreation",void 0);var N=o.ccclass,z=o.property;e("TileCreation",(m=N("TileCreation"),b=z(l),g=z(l),w=z(s),x=z(c),A=z(c),m((H=t((M=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).objects=[],t.originalobjects=[0,1,2,3,4,5],n(t,"HexaPrefab",H,i(t)),n(t,"shelfContainer",P,i(t)),n(t,"colorMaterial",S,i(t)),t.numberOfSets=5,t.HexArray=[],t.setIdexArray=[],t.animNodes=[],t.count=0,n(t,"BgNode",E,i(t)),n(t,"particle",I,i(t)),t}r(t,e);var a=t.prototype;return a.setIndexData=function(e,t,r,n){throw new Error("Method not implemented.")},a.start=function(){this.placingShelf(),u(!1)},a.placingShelf=function(){for(var e=0;e<this.numberOfSets;e++){var t=h(this.shelfContainer);t.parent=this.node.children[2],t.setPosition(0,.3*e-.45,0)}this.tileCreation()},a.tileCreation=function(){for(var e=0;e<this.numberOfSets;e++){for(var t=[],r=[],n=[],i=0;i<18;i++){var a=Math.floor(5*Math.random()),o=this.node.children[2].children[e].children[i];n.push(i),r.push(this.colorMaterial[a].name),t.push(e>=1&&0==i?-1:a);for(var l=0;l<5;l++)if(!(e>=1&&0==i)){var s=h(this.HexaPrefab);s.getComponent(f).materials[0]=this.colorMaterial[a],s.parent=o,s.setPosition(0,.05*l,0)}}t.length>=18&&(this.HexArray.push(t),this.setIdexArray.push(n))}},a.changeinArray=function(e,t){var r=this,n=this.rotateArray(this.HexArray[e],t);this.HexArray[e]=n;var i=this.rotateArray(this.setIdexArray[e],t);if(this.setIdexArray[e]=i,this.count++,this.checkFirstElements(this.HexArray)){for(var a=0;a<5;a++)this.animNodes.push(this.node.children[2].children[a].children[this.setIdexArray[a][0]]);this.particle.active=!0,this.particle.getComponent(p).play(),this.scheduleOnce((function(){r.tweenFunc();for(var e=0;e<5;e++)r.HexArray[e][0]=-1}),.2)}this.count>=15&&(this.BgNode.active=!0)},a.rotateArray=function(e,t){if(!Number.isFinite(t))throw new Error("Degrees must be a finite number");var r=Math.floor(t/20),n=e.length,i=(r%n+n)%n;if(0===i)return[].concat(e);var a=n-i;return[].concat(e.slice(a),e.slice(0,a))},a.findSameElementIndices=function(e){for(var t,r=function(t){var r=e[0][t];if(e.every((function(e){return e[t]===r})))return{v:t}},n=0;n<19;n++)if(t=r(n))return t.v;return-1},a.checkFirstElements=function(e){if(5!==e.length||e.some((function(e){return 18!==e.length})))throw new Error("Expected 5 arrays with 18 elements each");var t=e[0][0];return e.every((function(e){return e[0]===t}))},a.tweenFunc=function(){var e=this.animNodes.flatMap((function(e){return e.children}));!function t(r,n){if(void 0===n&&(n=0),!(r<0)){var i=e[r];d(i).delay(n).to(.1,{eulerAngles:new y(0,-5*(25-r),0)}).to(.3,{scale:new y(2,5,2)}).call((function(){return i.destroy()})).start(),t(r-1,n+.1)}}(e.length-1)},a.update=function(e){},t}(v)).prototype,"HexaPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(M.prototype,"shelfContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(M.prototype,"colorMaterial",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(M.prototype,"BgNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(M.prototype,"particle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=M))||C));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});