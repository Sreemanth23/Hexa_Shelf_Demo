System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./TileCreation.ts"],(function(e){"use strict";var t,i,n,o,l,r,s,a,d,c,h,g,S,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.defineProperty},function(e){r=e.cclegacy,s=e._decorator,a=e.Camera,d=e.Node,c=e.input,h=e.Input,g=e.geometry,S=e.PhysicsSystem,u=e.Component},function(e){p=e.TileCreation}],execute:function(){var x,f,N,y,b,m,I,T,v;r._RF.push({},"7e4f7aks2VC1rFHi44W0CxQ","GameManager",void 0);var C=s.ccclass,P=s.property;e("GameManager",(x=C("GameManager"),f=P(a),N=P(d),y=P(p),x((I=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(o(t),"camera",I,o(t)),n(o(t),"HelixParentNode",T,o(t)),n(o(t),"tileCreation",v,o(t)),l(o(t),"StartingPoint",void 0),l(o(t),"SelectedNode",null),l(o(t),"InitialAngle",void 0),l(o(t),"previousAngle",0),l(o(t),"Touch",!0),t}i(t,e);var r=t.prototype;return r.onEnable=function(){c.on(h.EventType.TOUCH_START,this.onTouchStart,this),c.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(h.EventType.TOUCH_END,this.onTouchEnd,this)},r.onDisable=function(){c.off(h.EventType.TOUCH_START,this.onTouchStart,this),c.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),c.off(h.EventType.TOUCH_END,this.onTouchEnd,this)},r.onTouchStart=function(e){var t=e.getLocation();this.StartingPoint=t.x;var i=new g.Ray;this.camera.screenPointToRay(t.x,t.y,i);if(S.instance.raycastClosest(i,4294967295,1e3,!0)){var n=S.instance.raycastClosestResult.collider.node;"Shelf"==n.name&&(this.SelectedNode=n,4==this.SelectedNode.getSiblingIndex()||-1==this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()+1][0]?this.touchselection(n):this.SelectedNode=null)}},r.touchselection=function(e){this.InitialAngle=e.eulerAngles.y;var t=this.HelixParentNode.children[this.SelectedNode.getSiblingIndex()].children[this.tileCreation.setIdexArray[this.SelectedNode.getSiblingIndex()][0]],i=t.getPosition();t.setPosition(i.x,0*this.SelectedNode.getSiblingIndex(),i.z)},r.onTouchMove=function(e){if(null!==this.SelectedNode&&"Shelf"===this.SelectedNode.name){var t=(e.getLocation().x-this.StartingPoint)/2;this.SelectedNode.setRotationFromEuler(0,this.InitialAngle+t,0)}},r.onTouchEnd=function(e){if(null!==this.SelectedNode){if("Shelf"==this.SelectedNode.name){var t=this.InitialAngle,i=this.calculateRotation(t,this.SelectedNode.eulerAngles.y),n=this.FixRotPos(this.SelectedNode.eulerAngles.y),o=this.FixRotPos(i);this.SelectedNode.setRotationFromEuler(0,n,0),this.tileCreation.changeinArray(this.SelectedNode.getSiblingIndex(),o);var l=this.HelixParentNode.children[this.SelectedNode.getSiblingIndex()].children[this.tileCreation.setIdexArray[this.SelectedNode.getSiblingIndex()][0]],r=l.getPosition(),s=this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()][0];if(0==this.SelectedNode.getSiblingIndex()||0==this.placeOnSegment(this.SelectedNode.getSiblingIndex()))l.setPosition(r.x,-.05*this.SelectedNode.getSiblingIndex(),r.z);else{l.setPosition(r.x,-.05*(6*this.placeOnSegment(this.SelectedNode.getSiblingIndex())+1),r.z);for(var a=this.HelixParentNode.children[this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())].children[this.tileCreation.setIdexArray[this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())][0]],d=0;d<5;d++)l.children.length>0&&(l.children[0].setPosition(0,.05*d,0),l.children[0].parent=a,a.setPosition(a.position.x,-.05*(this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())),a.position.z));this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()][0]=-1,this.tileCreation.HexArray[this.SelectedNode.getSiblingIndex()-this.placeOnSegment(this.SelectedNode.getSiblingIndex())][0]=s}}this.SelectedNode=null}},r.placeOnSegment=function(e){for(var t=[],i=e;i>0;i--){if(-1==this.tileCreation.HexArray[i-1][0])t.push(i-1);else if(0==t.length)return 0}return e-t[t.length-1]},r.FixRotPos=function(e){return 20*Math.round(e/20)},r.calculateRotation=function(e,t){var i=t-e;return i>180?i-=360:i<-180&&(i+=360),i},r.openGameLink=function(){window.open("https://play.google.com/store/apps/details?id=com.gamebrain.hexasort","HexaSort")},t}(u)).prototype,"camera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(m.prototype,"HelixParentNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"tileCreation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/TileCreation.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,a,o,l,s,c,u,h,f,p,d,y,v,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized,a=e.initializerDefineProperty},function(e){o=e.cclegacy,l=e._decorator,s=e.Prefab,c=e.Material,u=e.Node,h=e.setDisplayStats,f=e.instantiate,p=e.MeshRenderer,d=e.ParticleSystem,y=e.tween,v=e.Vec3,b=e.Component}],execute:function(){var m,g,w,x,A,M,C,H,P,S,E,I,N;o._RF.push({},"dc84dePlphEnJHw83WUr57u","TileCreation",void 0);var z=l.ccclass,F=l.property;e("TileCreation",(m=z("TileCreation"),g=F(s),w=F(s),x=F(c),A=F(u),M=F(u),m((P=t((H=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(i(t),"objects",[]),n(i(t),"originalobjects",[0,1,2,3,4,5]),a(i(t),"HexaPrefab",P,i(t)),a(i(t),"shelfContainer",S,i(t)),a(i(t),"colorMaterial",E,i(t)),n(i(t),"numberOfSets",5),n(i(t),"HexArray",[]),n(i(t),"setIdexArray",[]),n(i(t),"animNodes",[]),n(i(t),"count",0),a(i(t),"BgNode",I,i(t)),a(i(t),"particle",N,i(t)),t}r(t,e);var o=t.prototype;return o.setIndexData=function(e,t,r,n){throw new Error("Method not implemented.")},o.start=function(){this.placingShelf(),h(!1)},o.placingShelf=function(){for(var e=0;e<this.numberOfSets;e++){var t=f(this.shelfContainer);t.parent=this.node.children[2],t.setPosition(0,.3*e-.47,0)}this.tileCreation()},o.tileCreation=function(){for(var e=0;e<this.numberOfSets;e++){for(var t=[],r=[],n=[],i=0;i<18;i++){var a=Math.floor(5*Math.random()),o=this.node.children[2].children[e].children[i];n.push(i),r.push(this.colorMaterial[a].name),t.push(e>=1&&0==i?-1:a);for(var l=0;l<5;l++)if(!(e>=1&&0==i)){var s=f(this.HexaPrefab);s.getComponent(p).setMaterial(this.colorMaterial[a],0),s.parent=o,s.setPosition(0,.05*l,0)}}t.length>=18&&(this.HexArray.push(t),this.setIdexArray.push(n))}},o.changeinArray=function(e,t){var r=this,n=this.rotateArray(this.HexArray[e],t);this.HexArray[e]=n;var i=this.rotateArray(this.setIdexArray[e],t);if(this.setIdexArray[e]=i,this.count++,this.checkFirstElements(this.HexArray)){for(var a=0;a<5;a++)this.animNodes.push(this.node.children[2].children[a].children[this.setIdexArray[a][0]]);this.particle.active=!0,this.particle.getComponent(d).play(),this.scheduleOnce((function(){r.tweenFunc();for(var e=0;e<5;e++)r.HexArray[e][0]=-1}),.2)}this.count>=15&&(this.BgNode.active=!0)},o.rotateArray=function(e,t){if(!Number.isFinite(t))throw new Error("Degrees must be a finite number");var r=Math.floor(t/20),n=e.length,i=(r%n+n)%n;if(0===i)return[].concat(e);var a=n-i;return[].concat(e.slice(a),e.slice(0,a))},o.findSameElementIndices=function(e){for(var t=function(t){var r=e[0][t];if(e.every((function(e){return e[t]===r})))return{v:t}},r=0;r<19;r++){var n=t(r);if("object"==typeof n)return n.v}return-1},o.checkFirstElements=function(e){if(5!==e.length||e.some((function(e){return 18!==e.length})))throw new Error("Expected 5 arrays with 18 elements each");var t=e[0][0];return-1!==t&&e.every((function(e){return e[0]===t}))},o.tweenFunc=function(){var e=this.animNodes.flatMap((function(e){return e.children}));!function t(r,n){if(void 0===n&&(n=0),!(r<0)){var i=e[r];y(i).delay(n).to(.1,{eulerAngles:new v(0,-5*(25-r),0)}).to(.3,{scale:new v(2,5,2)}).call((function(){return i.destroy()})).start(),t(r-1,n+.1)}}(e.length-1)},t}(b)).prototype,"HexaPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(H.prototype,"shelfContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(H.prototype,"colorMaterial",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(H.prototype,"BgNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(H.prototype,"particle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=H))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./TileCreation.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});